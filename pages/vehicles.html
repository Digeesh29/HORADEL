<div class="page">
    <!-- HEADER -->
    <div class="vehicles-header">
        <div>
            <h2 class="page-heading">Vehicles</h2>
            <p class="page-subheading">Manage all vehicles and assignments</p>
        </div>
        <button class="btn btn-primary" id="addVehicleBtn">
            <span class="material-symbols-outlined" style="vertical-align:middle; font-size:18px;">add</span>
            Add New Vehicle
        </button>
    </div>

    <!-- VEHICLES GRID -->
    <div class="vehicles-grid" id="vehiclesGrid">
        <!-- Vehicle cards will be inserted here -->
    </div>
</div>

<!-- ADD VEHICLE MODAL - STEP 1: Vehicle Details -->
<div class="modal-overlay" id="addVehicleModal">
    <div class="modal-large">
        <div class="modal-header">
            <div>
                <div class="modal-title">Add New Vehicle - Vehicle Details</div>
                <div class="modal-subtitle">
                    <span class="material-symbols-outlined" style="font-size:16px; vertical-align:middle;">local_shipping</span>
                    Enter the vehicle and driver details to create a new vehicle entry.
                </div>
            </div>
            <button class="close-btn" id="closeVehicleModal">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>

        <div class="modal-body">
            <div class="form-group">
                <label>Vehicle Number *</label>
                <input type="text" id="vehicleNumber" class="form-input" placeholder="e.g., MH-12-AB-1234">
            </div>

            <div class="form-group">
                <label>Driver Name *</label>
                <input type="text" id="driverName" class="form-input" placeholder="Enter driver name">
            </div>

            <div class="form-group">
                <label>Contact Number *</label>
                <input type="tel" id="contactNumber" class="form-input" placeholder="+91 XXXXXXXXXX">
            </div>
        </div>

        <div class="modal-footer">
            <button class="btn btn-outline" id="cancelVehicleModal">Cancel</button>
            <button class="btn btn-primary" id="nextSelectParcels">Next: Select Parcels</button>
        </div>
    </div>
</div>

<!-- VEHICLE DETAILS MODAL -->
<div class="modal-overlay" id="vehicleDetailsModal">
    <div class="modal-xlarge">
        <div class="modal-header">
            <div>
                <div class="modal-title">
                    <span class="material-symbols-outlined" style="vertical-align:middle; margin-right:8px;">arrow_back</span>
                    <span onclick="closeVehicleDetailsModal()" style="cursor:pointer;">Back to Vehicles</span>
                </div>
            </div>
            <button class="close-btn" id="closeVehicleDetailsBtn">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>

        <div class="modal-body">
            <!-- Vehicle Header -->
            <div class="vehicle-details-header">
                <div class="vehicle-icon-large">
                    <span class="material-symbols-outlined">local_shipping</span>
                </div>
                <div>
                    <h2 id="detailVehicleNumber">-</h2>
                    <span class="status-badge" id="detailVehicleStatus">-</span>
                </div>
            </div>

            <!-- Vehicle Info Grid -->
            <div class="vehicle-info-grid">
                <div class="info-card">
                    <span class="material-symbols-outlined info-icon">person</span>
                    <div>
                        <div class="info-label">Driver Name</div>
                        <div class="info-value" id="detailDriverName">-</div>
                    </div>
                </div>
                <div class="info-card">
                    <span class="material-symbols-outlined info-icon">call</span>
                    <div>
                        <div class="info-label">Contact Number</div>
                        <div class="info-value" id="detailDriverPhone">-</div>
                    </div>
                </div>
                <div class="info-card">
                    <span class="material-symbols-outlined info-icon">scale</span>
                    <div>
                        <div class="info-label">Capacity</div>
                        <div class="info-value" id="detailCapacity">-</div>
                    </div>
                </div>
            </div>

            <!-- Assigned Parcels Section -->
            <div class="details-section">
                <div class="section-header">
                    <span class="material-symbols-outlined">inventory_2</span>
                    <h3>Assigned Parcels (<span id="detailParcelCount">0</span>)</h3>
                </div>
                <div class="parcels-table-container" style="max-height: 300px;">
                    <table class="parcels-table">
                        <thead>
                            <tr>
                                <th>LR No.</th>
                                <th>Company</th>
                                <th>Consignee</th>
                                <th>Destination</th>
                                <th>Articles</th>
                                <th>Assigned Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="detailParcelsTableBody">
                            <tr><td colspan="7" style="text-align:center; padding:20px;">No parcels assigned</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Recent Activity Section -->
            <div class="details-section">
                <div class="section-header">
                    <span class="material-symbols-outlined">history</span>
                    <h3>Recent Activity</h3>
                </div>
                <div class="activity-list" id="detailActivityList">
                    <div class="activity-item">
                        <div class="activity-dot activity-green"></div>
                        <div>
                            <div class="activity-text">Vehicle status updated to <strong>Dispatched</strong></div>
                            <div class="activity-time">2 hours ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SELECT PARCELS MODAL - STEP 2: Assign Parcels -->
<div class="modal-overlay" id="selectParcelsModal">
    <div class="modal-xlarge">
        <div class="modal-header">
            <div>
                <div class="modal-title">Add New Vehicle - Select Parcels</div>
                <div class="modal-subtitle">
                    <span class="material-symbols-outlined" style="font-size:16px; vertical-align:middle;">local_shipping</span>
                    Vehicle Information
                </div>
            </div>
            <button class="close-btn" id="closeSelectParcelsModal">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>

        <div class="modal-body">
            <!-- Vehicle Info Summary -->
            <div class="vehicle-info-summary">
                <div class="info-item">
                    <span class="info-label">Vehicle No.</span>
                    <span class="info-value" id="summaryVehicleNo">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Driver</span>
                    <span class="info-value" id="summaryDriver">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Contact</span>
                    <span class="info-value" id="summaryContact">-</span>
                </div>
            </div>

            <!-- Available Parcels Header -->
            <div class="parcels-header">
                <h4>Available Parcels</h4>
                <span class="selected-count" id="selectedCount">0 selected</span>
            </div>

            <!-- Parcels Table -->
            <div class="parcels-table-container">
                <table class="parcels-table">
                    <thead>
                        <tr>
                            <th style="width: 40px;"></th>
                            <th>LR No.</th>
                            <th>Company</th>
                            <th>Consignee</th>
                            <th>Destination</th>
                            <th>Articles</th>
                            <th>Weight</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody id="parcelsTableBody">
                        <!-- Parcels will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="modal-footer">
            <button class="btn btn-outline" id="backToVehicleDetails">Back</button>
            <button class="btn btn-outline" id="cancelSelectParcels">Cancel</button>
            <button class="btn btn-black" id="createVehicleWithParcels">
                Create Vehicle & Assign (<span id="assignCount">0</span>)
            </button>
        </div>
    </div>
</div>
